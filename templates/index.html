<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 20px;
            position: relative;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            color: #333;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .background-selector-btn {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            right: clamp(10px, 2vw, 20px);
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            z-index: 1000;
            font-size: clamp(12px, 1.5vw, 16px);
            transition: all 0.3s ease;
        }
        
        .background-selector-btn:hover {
            background: rgba(0,0,0,0.9);
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .background-selector-btn {
                padding: 8px 12px;
                font-size: 12px;
                top: 10px;
                right: 10px;
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .backgrounds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .background-item {
            text-align: center;
            cursor: pointer;
        }
        
        .background-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            border: 2px solid #ccc;
        }
        
        .background-item.selected img {
            border-color: #007bff;
            border-width: 3px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: clamp(8px, 1.2vw, 12px);
            border: 1px solid #ddd;
            border-radius: clamp(4px, 0.6vw, 6px);
            font-size: clamp(14px, 1.8vw, 16px);
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            .form-group input, .form-group select {
                padding: 10px;
                font-size: 16px; /* –ë–æ–ª—å—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∑—É–º–∞ */
            }
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #007bff;
        }
        
        button {
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: #007bff;
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            font-size: clamp(12px, 1.5vw, 16px);
            transition: all 0.3s ease;
            min-height: clamp(36px, 5vw, 44px);
            white-space: nowrap;
        }
        
        button:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            button {
                padding: 10px 16px;
                font-size: 14px;
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(200px, 25vw, 300px), 1fr));
            gap: clamp(15px, 2vw, 25px);
            margin-top: clamp(20px, 3vh, 30px);
        }
        
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        @media (min-width: 1200px) {
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        .book-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background: white;
        }
        
        .book-card h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .book-card p {
            margin: 5px 0;
            color: #666;
        }
        
        .book-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .delete-btn {
            background: #dc3545;
            margin-top: 10px;
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        .delete-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }
        
        .read-btn {
            background: #28a745;
            margin-top: 10px;
            margin-right: 5px;
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        .read-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        .home-btn {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            left: clamp(10px, 2vw, 20px);
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: #007bff;
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            font-size: clamp(12px, 1.5vw, 16px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .home-btn:hover {
            background: #0056b3;
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .home-btn {
                padding: 8px 12px;
                font-size: 12px;
                top: 10px;
                left: 10px;
            }
            
            .read-btn, .delete-btn {
                width: 100%;
                margin-right: 0;
                margin-bottom: 5px;
            }
        }
        
        .toast {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            right: clamp(10px, 2vw, 20px);
            background: #28a745;
            color: white;
            padding: clamp(12px, 1.8vw, 18px) clamp(20px, 3vw, 28px);
            border-radius: clamp(4px, 0.6vw, 6px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            max-width: clamp(250px, 40vw, 400px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        @media (max-width: 768px) {
            .toast {
                left: 10px;
                right: 10px;
                max-width: calc(100% - 20px);
                padding: 15px 20px;
            }
        }
        
        .toast.error {
            background: #dc3545;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body id="body">
    <a href="/" class="home-btn">üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</a>
    <button class="background-selector-btn" onclick="toggleBackgroundSelector()">–í—ã–±—Ä–∞—Ç—å —Ñ–æ–Ω</button>
    
    <div class="modal" id="backgroundModal">
        <div class="modal-content">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ–Ω</h3>
            
            <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px;">
                <h4 style="margin-bottom: 10px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ñ–æ–Ω</h4>
                <input 
                    type="file" 
                    id="backgroundFile" 
                    accept="image/*,.svg"
                    style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px;"
                />
                <button 
                    onclick="uploadBackground()"
                    style="width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;"
                >
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å
                </button>
            </div>
            
            <button onclick="saveBackground(null)" style="margin-bottom: 15px; width: 100%;">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</button>
            <div class="backgrounds-grid" id="backgroundsGrid"></div>
            <button onclick="toggleBackgroundSelector()" style="margin-top: 15px; width: 100%; background: #666;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
    
    <div class="container">
        <h1>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
        
        <div id="loginForm" style="margin-bottom: 30px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
            <h3>–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 15px;">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: <b>admin</b> / <b>admin123</b></p>
            <input type="text" id="adminUsername" placeholder="–õ–æ–≥–∏–Ω" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <input type="password" id="adminPassword" placeholder="–ü–∞—Ä–æ–ª—å" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <button onclick="adminLogin()" style="width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">–í–æ–π—Ç–∏</button>
            <div style="margin: 15px 0; text-align: center; color: #666; font-size: 14px;">–∏–ª–∏</div>
            <button onclick="loginWithGoogle()" style="width: 100%; padding: 10px; background: #4285f4; color: white; border: none; border-radius: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                <svg width="18" height="18" viewBox="0 0 18 18">
                    <path fill="#fff" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                    <path fill="#34a853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                    <path fill="#fbbc05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.951H.957C.347 6.174 0 7.55 0 9s.348 2.826.957 4.049l2.907-2.342z"/>
                    <path fill="#ea4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.951L3.964 7.293C4.672 5.156 6.656 3.58 9 3.58z"/>
                </svg>
                –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
            </button>
            <div id="loginError" style="color: red; margin-top: 10px; display: none;"></div>
            <div style="margin-top: 15px; text-align: center;">
                <a href="/books" style="color: #007bff; text-decoration: none;">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–≥—É</a>
            </div>
        </div>
        
        <div id="adminPanel" style="display: none;">
            <div style="text-align: right; margin-bottom: 20px;">
                <span id="adminName" style="margin-right: 15px;"></span>
                <a href="/admin/users" style="margin-right: 10px; padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block;">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                <button onclick="logout()" style="padding: 8px 16px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">–í—ã—Ö–æ–¥</button>
            </div>
        
        <form id="bookForm" onsubmit="addBook(event)" enctype="multipart/form-data">
            <div class="form-group">
                <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ *" required>
            </div>
            <div class="form-group">
                <input type="text" id="author" placeholder="–ê–≤—Ç–æ—Ä *" required>
            </div>
            <div class="form-group">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">–ñ–∞–Ω—Ä *</label>
                <select id="genre" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä</option>
                    <optgroup label="–û—Å–Ω–æ–≤–Ω—ã–µ –∂–∞–Ω—Ä—ã">
                        <option value="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
                        <option value="–§—ç–Ω—Ç–µ–∑–∏">–§—ç–Ω—Ç–µ–∑–∏</option>
                        <option value="–î–µ—Ç–µ–∫—Ç–∏–≤">–î–µ—Ç–µ–∫—Ç–∏–≤</option>
                        <option value="–¢—Ä–∏–ª–ª–µ—Ä">–¢—Ä–∏–ª–ª–µ—Ä</option>
                        <option value="–†–æ–º–∞–Ω">–†–æ–º–∞–Ω</option>
                        <option value="–õ—é–±–æ–≤–Ω—ã–π —Ä–æ–º–∞–Ω">–õ—é–±–æ–≤–Ω—ã–π —Ä–æ–º–∞–Ω</option>
                        <option value="–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è">–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</option>
                        <option value="–£–∂–∞—Å—ã">–£–∂–∞—Å—ã</option>
                        <option value="–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
                        <option value="–ö–∏–±–µ—Ä–ø–∞–Ω–∫">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</option>
                        <option value="–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏–∫–∞">–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏–∫–∞</option>
                        <option value="–î—Ä–∞–º–∞">–î—Ä–∞–º–∞</option>
                        <option value="–ö–æ–º–µ–¥–∏—è">–ö–æ–º–µ–¥–∏—è</option>
                        <option value="–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω">–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω</option>
                    </optgroup>
                    <optgroup label="–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏ —Å–µ—Ä–∏–∏">
                        <option value="–°–∏–∫–≤–µ–ª">–°–∏–∫–≤–µ–ª</option>
                        <option value="–ü—Ä–∏–∫–≤–µ–ª">–ü—Ä–∏–∫–≤–µ–ª</option>
                        <option value="–°–ø–∏–Ω-–æ—Ñ—Ñ">–°–ø–∏–Ω-–æ—Ñ—Ñ</option>
                        <option value="–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏</option>
                        <option value="–ö–Ω–∏–≥–∞ —Å–µ—Ä–∏–∏">–ö–Ω–∏–≥–∞ —Å–µ—Ä–∏–∏</option>
                        <option value="–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å">–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å</option>
                        <option value="–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å">–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å</option>
                        <option value="–§–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å">–§–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å</option>
                    </optgroup>
                    <optgroup label="–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">
                        <option value="–ë–∏–æ–≥—Ä–∞—Ñ–∏—è">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</option>
                        <option value="–ú–µ–º—É–∞—Ä—ã">–ú–µ–º—É–∞—Ä—ã</option>
                        <option value="–ü–æ—ç–∑–∏—è">–ü–æ—ç–∑–∏—è</option>
                        <option value="–§–∏–ª–æ—Å–æ—Ñ–∏—è">–§–∏–ª–æ—Å–æ—Ñ–∏—è</option>
                        <option value="–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</option>
                        <option value="–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ">–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                        <option value="–ë–∏–∑–Ω–µ—Å">–ë–∏–∑–Ω–µ—Å</option>
                        <option value="–ù–∞—É–∫–∞">–ù–∞—É–∫–∞</option>
                        <option value="–¢–µ—Ö–Ω–∏–∫–∞">–¢–µ—Ö–Ω–∏–∫–∞</option>
                        <option value="–ú–µ–¥–∏—Ü–∏–Ω–∞">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                        <option value="–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                        <option value="–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</option>
                        <option value="–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è">–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è</option>
                        <option value="–ö—É–ª–∏–Ω–∞—Ä–∏—è">–ö—É–ª–∏–Ω–∞—Ä–∏—è</option>
                        <option value="–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</option>
                        <option value="–°–ø–æ—Ä—Ç">–°–ø–æ—Ä—Ç</option>
                        <option value="–•–æ–±–±–∏">–•–æ–±–±–∏</option>
                    </optgroup>
                    <optgroup label="–î–µ—Ç—Å–∫–∞—è –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">
                        <option value="–î–µ—Ç—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–î–µ—Ç—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–ü–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–ü–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–ú–∏—Ñ–æ–ª–æ–≥–∏—è">–ú–∏—Ñ–æ–ª–æ–≥–∏—è</option>
                        <option value="–§–æ–ª—å–∫–ª–æ—Ä">–§–æ–ª—å–∫–ª–æ—Ä</option>
                        <option value="–°–∫–∞–∑–∫–∏">–°–∫–∞–∑–∫–∏</option>
                        <option value="–ë–∞—Å–Ω–∏">–ë–∞—Å–Ω–∏</option>
                    </optgroup>
                    <optgroup label="–î—Ä—É–≥–æ–µ">
                        <option value="–†–µ–ª–∏–≥–∏—è">–†–µ–ª–∏–≥–∏—è</option>
                        <option value="–≠–∑–æ—Ç–µ—Ä–∏–∫–∞">–≠–∑–æ—Ç–µ—Ä–∏–∫–∞</option>
                        <option value="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                    </optgroup>
                </select>
                <input type="text" id="genreCustom" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –∂–∞–Ω—Ä" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; display: none;">
            </div>
            <script>
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–î—Ä—É–≥–æ–µ"
                document.getElementById('genre').addEventListener('change', function() {
                    const customField = document.getElementById('genreCustom');
                    if (this.value === '–î—Ä—É–≥–æ–µ') {
                        customField.style.display = 'block';
                        customField.required = true;
                    } else {
                        customField.style.display = 'none';
                        customField.required = false;
                        customField.value = '';
                    }
                });
            </script>
            <div class="form-group">
                <input type="text" id="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            </div>
            <div class="form-group">
                <input type="text" id="cover" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–æ–∂–∫—É">
            </div>
            <div class="form-group">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">–§–∞–π–ª –∫–Ω–∏–≥–∏ (TXT):</label>
                <input type="file" id="bookFile" accept=".txt" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                <small style="color: #666; font-size: 12px;">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –±–µ–∑ —Ñ–∞–π–ª–∞</small>
            </div>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</button>
        </form>
        
        <div class="books-grid" id="booksGrid"></div>
        </div>
    </div>
    
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function checkAuth() {
            try {
                const res = await fetch('/api/check-auth');
                const data = await res.json();
                console.log('–°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', data);
                if (data.is_admin) {
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('adminPanel').style.display = 'block';
                    document.getElementById('adminName').textContent = '–ê–¥–º–∏–Ω: ' + (data.username || 'admin');
                    return true;
                } else {
                    document.getElementById('loginForm').style.display = 'block';
                    document.getElementById('adminPanel').style.display = 'none';
                    document.getElementById('loginError').textContent = '';
                    document.getElementById('loginError').style.display = 'none';
                    return false;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('adminPanel').style.display = 'none';
                return false;
            }
        }
        
        // –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∞
        async function adminLogin() {
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            if (!username || !password) {
                errorDiv.textContent = '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è';
                errorDiv.style.display = 'block';
                return;
            }
            
            errorDiv.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
            errorDiv.style.color = 'blue';
            errorDiv.style.display = 'block';
            
            try {
                const res = await fetch('/api/admin/login', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({username: username, password: password})
                });
                
                const data = await res.json();
                if (res.ok) {
                    errorDiv.textContent = '–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!';
                    errorDiv.style.color = 'green';
                    setTimeout(() => {
                        checkAuth();
                        loadBooks();
                    }, 500);
                } else {
                    errorDiv.textContent = data.error || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞';
                    errorDiv.style.color = 'red';
                    console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', data);
                }
            } catch (error) {
                errorDiv.textContent = '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É';
                errorDiv.style.color = 'red';
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }
        
        // –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
        function loginWithGoogle() {
            const currentUrl = window.location.href;
            window.location.href = `/api/auth/google?redirect_uri=${encodeURIComponent(currentUrl)}`;
        }
        
        // –í—ã—Ö–æ–¥
        async function logout() {
            try {
                await fetch('/api/logout', {method: 'POST'});
                checkAuth();
                document.getElementById('booksGrid').innerHTML = '';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:', error);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function addBook(event) {
            event.preventDefault();
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
                const authRes = await fetch('/api/check-auth');
                const auth = await authRes.json();
                if (!auth.is_admin) {
                    alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Ñ–æ—Ä–º—É
                const form = document.getElementById('bookForm');
                if (!form) {
                    alert('–û—à–∏–±–∫–∞: —Ñ–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                    console.error('–§–æ—Ä–º–∞ bookForm –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
                const titleEl = document.getElementById('title');
                const authorEl = document.getElementById('author');
                const genreEl = document.getElementById('genre');
                const descriptionEl = document.getElementById('description');
                const coverEl = document.getElementById('cover');
                const bookFileEl = document.getElementById('bookFile');
                
                if (!titleEl || !authorEl || !genreEl) {
                    alert('–û—à–∏–±–∫–∞: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                    console.error('–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:', {
                        title: !!titleEl,
                        author: !!authorEl,
                        genre: !!genreEl
                    });
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
                const title = (titleEl.value || '').trim();
                const author = (authorEl.value || '').trim();
                // –ü–æ–ª—É—á–∞–µ–º –∂–∞–Ω—Ä –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –∏–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è
                let genre = (genreEl.value || '').trim();
                const genreCustomEl = document.getElementById('genreCustom');
                if (genre === '–î—Ä—É–≥–æ–µ' && genreCustomEl && genreCustomEl.value.trim()) {
                    genre = genreCustomEl.value.trim();
                }
                if (!genre) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π');
                    return;
                }
                const description = (descriptionEl && descriptionEl.value) ? descriptionEl.value.trim() : '';
                const cover = (coverEl && coverEl.value) ? coverEl.value.trim() : '';
                const bookFile = (bookFileEl && bookFileEl.files && bookFileEl.files.length > 0) ? bookFileEl.files[0] : null;
                
                if (!title || !author || !genre) {
                    alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º FormData
                const formData = new FormData();
                formData.append('title', title);
                formData.append('author', author);
                formData.append('genre', genre);
                if (description) {
                    formData.append('description', description);
                }
                if (cover) {
                    formData.append('cover', cover);
                }
                
                if (bookFile) {
                    formData.append('book_file', bookFile);
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
                const res = await fetch('/api/books', {
                    method: 'POST',
                    body: formData
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
                if (!res.ok) {
                    const errorText = await res.text();
                    let errorData;
                    try {
                        errorData = JSON.parse(errorText);
                    } catch (e) {
                        errorData = { error: errorText || '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' };
                    }
                    alert(errorData.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
                    return;
                }
                
                const data = await res.json();
                showToast(data.message || '–ö–Ω–∏–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
                form.reset();
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                showToast('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏: ' + (error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/—á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥–∏
        async function downloadBook(bookId) {
            try {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
                window.open(`/read?id=${encodeURIComponent(bookId)}`, '_blank');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–Ω–∏–≥–∏:', error);
                showToast('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–Ω–∏–≥–∏', 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showToast(message, type = 'success') {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏
        async function deleteBook(id) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            const res = await fetch('/api/check-auth');
            const auth = await res.json();
            if (!auth.is_admin) {
                alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');
                return;
            }
            
            if (!confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É?')) return;
            
            try {
                const res = await fetch(`/api/books?id=${id}`, {
                    method: 'DELETE'
                });
                const data = await res.json();
                alert(data.message || data.error);
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
            }
        }
        
        window.onload = async function() {
            loadSettings();
            const isAdmin = await checkAuth();
            if (isAdmin) {
                loadBooks();
            }
        };
        let currentBackground = null;
        let availableBackgrounds = [];
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function loadSettings() {
            try {
                const res = await fetch('/api/settings');
                const data = await res.json();
                if (data.settings && data.settings.background) {
                    currentBackground = data.settings.background;
                    document.body.style.backgroundImage = `url(${currentBackground})`;
                }
                if (data.availableBackgrounds) {
                    availableBackgrounds = data.availableBackgrounds;
                    renderBackgrounds();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞
        async function saveBackground(bgUrl) {
            try {
                const res = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        background: bgUrl,
                        backgroundType: 'custom'
                    })
                });
                const data = await res.json();
                if (data.settings) {
                    currentBackground = bgUrl;
                    if (bgUrl) {
                        document.body.style.backgroundImage = `url(${bgUrl})`;
                    } else {
                        document.body.style.backgroundImage = '';
                    }
                    toggleBackgroundSelector();
                    loadSettings(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ–Ω–∞:', error);
            }
        }
        
        async function uploadBackground() {
            const fileInput = document.getElementById('backgroundFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                return;
            }
            
            try {
                const formData = new FormData();
                formData.append('background_file', file);
                
                const res = await fetch('/api/settings', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await res.json();
                if (res.ok) {
                    alert('–§–æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                    currentBackground = data.settings.background;
                    document.body.style.backgroundImage = `url(${currentBackground})`;
                    fileInput.value = '';
                    loadSettings(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤
                    toggleBackgroundSelector();
                } else {
                    alert(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞');
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤
        function renderBackgrounds() {
            const grid = document.getElementById('backgroundsGrid');
            grid.innerHTML = '';
            
            availableBackgrounds.forEach(bg => {
                const div = document.createElement('div');
                div.className = 'background-item' + (currentBackground === bg.url ? ' selected' : '');
                div.innerHTML = `
                    <img src="${bg.url}" alt="${bg.name}" onclick="saveBackground('${bg.url}')">
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${bg.name}</div>
                `;
                grid.appendChild(div);
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Ñ–æ–Ω–∞
        function toggleBackgroundSelector() {
            const modal = document.getElementById('backgroundModal');
            modal.classList.toggle('active');
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥
        async function loadBooks() {
            try {
                const res = await fetch('/api/books');
                const books = await res.json();
                const grid = document.getElementById('booksGrid');
                grid.innerHTML = '';
                
                books.forEach(book => {
                    const card = document.createElement('div');
                    card.className = 'book-card';
                    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ–º ID –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ JavaScript
                    const bookId = String(book.id || '').replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const hasFile = book.book_file ? true : false;
                    card.innerHTML = `
                        ${book.cover && book.cover.trim() !== '' ? `
                        <img src="${book.cover}" 
                             alt="–û–±–ª–æ–∂–∫–∞" 
                             onerror="this.onerror=null; this.style.display='none'; const placeholder=this.nextElementSibling; if(placeholder) placeholder.style.display='flex';" 
                             onload="const placeholder=this.nextElementSibling; if(placeholder) placeholder.style.display='none'; this.style.display='block';"
                             style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px; margin: 10px 0; display: block;"
                             referrerpolicy="no-referrer">
                        <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 5px; margin: 10px 0; display: none; align-items: center; justify-content: center; color: white; font-size: 48px;">üìö</div>
                        ` : '<div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 5px; margin: 10px 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">üìö</div>'}
                        <h3>${book.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                        <p><b>–ê–≤—Ç–æ—Ä:</b> ${book.author || '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}</p>
                        <p><b>–ñ–∞–Ω—Ä:</b> ${book.genre || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                        ${book.description ? `<p style="color: #666; font-size: 14px; margin-top: 10px;">${book.description}</p>` : ''}
                        <div style="margin-top: 15px;">
                            ${hasFile ? `<button class="read-btn" data-book-id="${bookId.replace(/"/g, '&quot;')}" onclick="downloadBook('${bookId}')">üìñ –ß–∏—Ç–∞—Ç—å</button>` : ''}
                            <button class="delete-btn" data-book-id="${bookId.replace(/"/g, '&quot;')}" onclick="deleteBook('${bookId}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    `;
                    grid.appendChild(card);
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥');
            }
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
        async function deleteBook(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É?')) return;
            
            try {
                const res = await fetch(`/api/books?id=${id}`, {
                    method: 'DELETE'
                });
                const data = await res.json();
                alert(data.message || data.error);
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            loadSettings();
            loadBooks();
        };
    </script>
</body>
</html>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 20px;
            position: relative;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            color: #333;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .background-selector-btn {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            right: clamp(10px, 2vw, 20px);
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            z-index: 1000;
            font-size: clamp(12px, 1.5vw, 16px);
            transition: all 0.3s ease;
        }
        
        .background-selector-btn:hover {
            background: rgba(0,0,0,0.9);
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .background-selector-btn {
                padding: 8px 12px;
                font-size: 12px;
                top: 10px;
                right: 10px;
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .backgrounds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .background-item {
            text-align: center;
            cursor: pointer;
        }
        
        .background-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            border: 2px solid #ccc;
        }
        
        .background-item.selected img {
            border-color: #007bff;
            border-width: 3px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: clamp(8px, 1.2vw, 12px);
            border: 1px solid #ddd;
            border-radius: clamp(4px, 0.6vw, 6px);
            font-size: clamp(14px, 1.8vw, 16px);
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            .form-group input, .form-group select {
                padding: 10px;
                font-size: 16px; /* –ë–æ–ª—å—à–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∑—É–º–∞ */
            }
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #007bff;
        }
        
        button {
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: #007bff;
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            font-size: clamp(12px, 1.5vw, 16px);
            transition: all 0.3s ease;
            min-height: clamp(36px, 5vw, 44px);
            white-space: nowrap;
        }
        
        button:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            button {
                padding: 10px 16px;
                font-size: 14px;
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(200px, 25vw, 300px), 1fr));
            gap: clamp(15px, 2vw, 25px);
            margin-top: clamp(20px, 3vh, 30px);
        }
        
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }
        
        @media (min-width: 1200px) {
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        .book-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background: white;
        }
        
        .book-card h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .book-card p {
            margin: 5px 0;
            color: #666;
        }
        
        .book-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .delete-btn {
            background: #dc3545;
            margin-top: 10px;
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        .delete-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }
        
        .read-btn {
            background: #28a745;
            margin-top: 10px;
            margin-right: 5px;
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        .read-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        .home-btn {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            left: clamp(10px, 2vw, 20px);
            padding: clamp(8px, 1.2vw, 12px) clamp(16px, 2.5vw, 24px);
            background: #007bff;
            color: white;
            border: none;
            border-radius: clamp(4px, 0.6vw, 6px);
            cursor: pointer;
            font-size: clamp(12px, 1.5vw, 16px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .home-btn:hover {
            background: #0056b3;
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .home-btn {
                padding: 8px 12px;
                font-size: 12px;
                top: 10px;
                left: 10px;
            }
            
            .read-btn, .delete-btn {
                width: 100%;
                margin-right: 0;
                margin-bottom: 5px;
            }
        }
        
        .toast {
            position: fixed;
            top: clamp(10px, 2vh, 20px);
            right: clamp(10px, 2vw, 20px);
            background: #28a745;
            color: white;
            padding: clamp(12px, 1.8vw, 18px) clamp(20px, 3vw, 28px);
            border-radius: clamp(4px, 0.6vw, 6px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            max-width: clamp(250px, 40vw, 400px);
            font-size: clamp(12px, 1.5vw, 16px);
        }
        
        @media (max-width: 768px) {
            .toast {
                left: 10px;
                right: 10px;
                max-width: calc(100% - 20px);
                padding: 15px 20px;
            }
        }
        
        .toast.error {
            background: #dc3545;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body id="body">
    <a href="/" class="home-btn">üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</a>
    <button class="background-selector-btn" onclick="toggleBackgroundSelector()">–í—ã–±—Ä–∞—Ç—å —Ñ–æ–Ω</button>
    
    <div class="modal" id="backgroundModal">
        <div class="modal-content">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ–Ω</h3>
            
            <div style="margin-bottom: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px;">
                <h4 style="margin-bottom: 10px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ñ–æ–Ω</h4>
                <input 
                    type="file" 
                    id="backgroundFile" 
                    accept="image/*,.svg"
                    style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px;"
                />
                <button 
                    onclick="uploadBackground()"
                    style="width: 100%; padding: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;"
                >
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å
                </button>
            </div>
            
            <button onclick="saveBackground(null)" style="margin-bottom: 15px; width: 100%;">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</button>
            <div class="backgrounds-grid" id="backgroundsGrid"></div>
            <button onclick="toggleBackgroundSelector()" style="margin-top: 15px; width: 100%; background: #666;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
    
    <div class="container">
        <h1>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
        
        <div id="loginForm" style="margin-bottom: 30px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
            <h3>–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 15px;">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: <b>admin</b> / <b>admin123</b></p>
            <input type="text" id="adminUsername" placeholder="–õ–æ–≥–∏–Ω" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <input type="password" id="adminPassword" placeholder="–ü–∞—Ä–æ–ª—å" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
            <button onclick="adminLogin()" style="width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">–í–æ–π—Ç–∏</button>
            <div style="margin: 15px 0; text-align: center; color: #666; font-size: 14px;">–∏–ª–∏</div>
            <button onclick="loginWithGoogle()" style="width: 100%; padding: 10px; background: #4285f4; color: white; border: none; border-radius: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                <svg width="18" height="18" viewBox="0 0 18 18">
                    <path fill="#fff" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                    <path fill="#34a853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                    <path fill="#fbbc05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.951H.957C.347 6.174 0 7.55 0 9s.348 2.826.957 4.049l2.907-2.342z"/>
                    <path fill="#ea4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.951L3.964 7.293C4.672 5.156 6.656 3.58 9 3.58z"/>
                </svg>
                –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
            </button>
            <div id="loginError" style="color: red; margin-top: 10px; display: none;"></div>
            <div style="margin-top: 15px; text-align: center;">
                <a href="/books" style="color: #007bff; text-decoration: none;">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–≥—É</a>
            </div>
        </div>
        
        <div id="adminPanel" style="display: none;">
            <div style="text-align: right; margin-bottom: 20px;">
                <span id="adminName" style="margin-right: 15px;"></span>
                <a href="/admin/users" style="margin-right: 10px; padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block;">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
                <button onclick="logout()" style="padding: 8px 16px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">–í—ã—Ö–æ–¥</button>
            </div>
        
        <form id="bookForm" onsubmit="addBook(event)" enctype="multipart/form-data">
            <div class="form-group">
                <input type="text" id="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ *" required>
            </div>
            <div class="form-group">
                <input type="text" id="author" placeholder="–ê–≤—Ç–æ—Ä *" required>
            </div>
            <div class="form-group">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">–ñ–∞–Ω—Ä *</label>
                <select id="genre" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px;" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä</option>
                    <optgroup label="–û—Å–Ω–æ–≤–Ω—ã–µ –∂–∞–Ω—Ä—ã">
                        <option value="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
                        <option value="–§—ç–Ω—Ç–µ–∑–∏">–§—ç–Ω—Ç–µ–∑–∏</option>
                        <option value="–î–µ—Ç–µ–∫—Ç–∏–≤">–î–µ—Ç–µ–∫—Ç–∏–≤</option>
                        <option value="–¢—Ä–∏–ª–ª–µ—Ä">–¢—Ä–∏–ª–ª–µ—Ä</option>
                        <option value="–†–æ–º–∞–Ω">–†–æ–º–∞–Ω</option>
                        <option value="–õ—é–±–æ–≤–Ω—ã–π —Ä–æ–º–∞–Ω">–õ—é–±–æ–≤–Ω—ã–π —Ä–æ–º–∞–Ω</option>
                        <option value="–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è">–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</option>
                        <option value="–£–∂–∞—Å—ã">–£–∂–∞—Å—ã</option>
                        <option value="–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
                        <option value="–ö–∏–±–µ—Ä–ø–∞–Ω–∫">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</option>
                        <option value="–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏–∫–∞">–ü–æ—Å—Ç–∞–ø–æ–∫–∞–ª–∏–ø—Ç–∏–∫–∞</option>
                        <option value="–î—Ä–∞–º–∞">–î—Ä–∞–º–∞</option>
                        <option value="–ö–æ–º–µ–¥–∏—è">–ö–æ–º–µ–¥–∏—è</option>
                        <option value="–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω">–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–æ–º–∞–Ω</option>
                    </optgroup>
                    <optgroup label="–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∏ —Å–µ—Ä–∏–∏">
                        <option value="–°–∏–∫–≤–µ–ª">–°–∏–∫–≤–µ–ª</option>
                        <option value="–ü—Ä–∏–∫–≤–µ–ª">–ü—Ä–∏–∫–≤–µ–ª</option>
                        <option value="–°–ø–∏–Ω-–æ—Ñ—Ñ">–°–ø–∏–Ω-–æ—Ñ—Ñ</option>
                        <option value="–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏</option>
                        <option value="–ö–Ω–∏–≥–∞ —Å–µ—Ä–∏–∏">–ö–Ω–∏–≥–∞ —Å–µ—Ä–∏–∏</option>
                        <option value="–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å">–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å</option>
                        <option value="–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å">–¢—Ä–µ—Ç—å—è —á–∞—Å—Ç—å</option>
                        <option value="–§–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å">–§–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å</option>
                    </optgroup>
                    <optgroup label="–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">
                        <option value="–ë–∏–æ–≥—Ä–∞—Ñ–∏—è">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</option>
                        <option value="–ú–µ–º—É–∞—Ä—ã">–ú–µ–º—É–∞—Ä—ã</option>
                        <option value="–ü–æ—ç–∑–∏—è">–ü–æ—ç–∑–∏—è</option>
                        <option value="–§–∏–ª–æ—Å–æ—Ñ–∏—è">–§–∏–ª–æ—Å–æ—Ñ–∏—è</option>
                        <option value="–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</option>
                        <option value="–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ">–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                        <option value="–ë–∏–∑–Ω–µ—Å">–ë–∏–∑–Ω–µ—Å</option>
                        <option value="–ù–∞—É–∫–∞">–ù–∞—É–∫–∞</option>
                        <option value="–¢–µ—Ö–Ω–∏–∫–∞">–¢–µ—Ö–Ω–∏–∫–∞</option>
                        <option value="–ú–µ–¥–∏—Ü–∏–Ω–∞">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                        <option value="–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ">–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                        <option value="–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫</option>
                        <option value="–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è">–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è</option>
                        <option value="–ö—É–ª–∏–Ω–∞—Ä–∏—è">–ö—É–ª–∏–Ω–∞—Ä–∏—è</option>
                        <option value="–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</option>
                        <option value="–°–ø–æ—Ä—Ç">–°–ø–æ—Ä—Ç</option>
                        <option value="–•–æ–±–±–∏">–•–æ–±–±–∏</option>
                    </optgroup>
                    <optgroup label="–î–µ—Ç—Å–∫–∞—è –∏ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">
                        <option value="–î–µ—Ç—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–î–µ—Ç—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–ü–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–ü–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–ú–∏—Ñ–æ–ª–æ–≥–∏—è">–ú–∏—Ñ–æ–ª–æ–≥–∏—è</option>
                        <option value="–§–æ–ª—å–∫–ª–æ—Ä">–§–æ–ª—å–∫–ª–æ—Ä</option>
                        <option value="–°–∫–∞–∑–∫–∏">–°–∫–∞–∑–∫–∏</option>
                        <option value="–ë–∞—Å–Ω–∏">–ë–∞—Å–Ω–∏</option>
                    </optgroup>
                    <optgroup label="–î—Ä—É–≥–æ–µ">
                        <option value="–†–µ–ª–∏–≥–∏—è">–†–µ–ª–∏–≥–∏—è</option>
                        <option value="–≠–∑–æ—Ç–µ—Ä–∏–∫–∞">–≠–∑–æ—Ç–µ—Ä–∏–∫–∞</option>
                        <option value="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</option>
                        <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                    </optgroup>
                </select>
                <input type="text" id="genreCustom" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –∂–∞–Ω—Ä" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 5px; font-size: 14px; display: none;">
            </div>
            <script>
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–î—Ä—É–≥–æ–µ"
                document.getElementById('genre').addEventListener('change', function() {
                    const customField = document.getElementById('genreCustom');
                    if (this.value === '–î—Ä—É–≥–æ–µ') {
                        customField.style.display = 'block';
                        customField.required = true;
                    } else {
                        customField.style.display = 'none';
                        customField.required = false;
                        customField.value = '';
                    }
                });
            </script>
            <div class="form-group">
                <input type="text" id="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
            </div>
            <div class="form-group">
                <input type="text" id="cover" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–æ–∂–∫—É">
            </div>
            <div class="form-group">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">–§–∞–π–ª –∫–Ω–∏–≥–∏ (TXT):</label>
                <input type="file" id="bookFile" accept=".txt" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                <small style="color: #666; font-size: 12px;">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –±–µ–∑ —Ñ–∞–π–ª–∞</small>
            </div>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</button>
        </form>
        
        <div class="books-grid" id="booksGrid"></div>
        </div>
    </div>
    
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function checkAuth() {
            try {
                const res = await fetch('/api/check-auth');
                const data = await res.json();
                console.log('–°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', data);
                if (data.is_admin) {
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('adminPanel').style.display = 'block';
                    document.getElementById('adminName').textContent = '–ê–¥–º–∏–Ω: ' + (data.username || 'admin');
                    return true;
                } else {
                    document.getElementById('loginForm').style.display = 'block';
                    document.getElementById('adminPanel').style.display = 'none';
                    document.getElementById('loginError').textContent = '';
                    document.getElementById('loginError').style.display = 'none';
                    return false;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('adminPanel').style.display = 'none';
                return false;
            }
        }
        
        // –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∞
        async function adminLogin() {
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            if (!username || !password) {
                errorDiv.textContent = '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è';
                errorDiv.style.display = 'block';
                return;
            }
            
            errorDiv.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
            errorDiv.style.color = 'blue';
            errorDiv.style.display = 'block';
            
            try {
                const res = await fetch('/api/admin/login', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({username: username, password: password})
                });
                
                const data = await res.json();
                if (res.ok) {
                    errorDiv.textContent = '–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!';
                    errorDiv.style.color = 'green';
                    setTimeout(() => {
                        checkAuth();
                        loadBooks();
                    }, 500);
                } else {
                    errorDiv.textContent = data.error || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞';
                    errorDiv.style.color = 'red';
                    console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', data);
                }
            } catch (error) {
                errorDiv.textContent = '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É';
                errorDiv.style.color = 'red';
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }
        
        // –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google
        function loginWithGoogle() {
            const currentUrl = window.location.href;
            window.location.href = `/api/auth/google?redirect_uri=${encodeURIComponent(currentUrl)}`;
        }
        
        // –í—ã—Ö–æ–¥
        async function logout() {
            try {
                await fetch('/api/logout', {method: 'POST'});
                checkAuth();
                document.getElementById('booksGrid').innerHTML = '';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:', error);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function addBook(event) {
            event.preventDefault();
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
                const authRes = await fetch('/api/check-auth');
                const auth = await authRes.json();
                if (!auth.is_admin) {
                    alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Ñ–æ—Ä–º—É
                const form = document.getElementById('bookForm');
                if (!form) {
                    alert('–û—à–∏–±–∫–∞: —Ñ–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                    console.error('–§–æ—Ä–º–∞ bookForm –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
                const titleEl = document.getElementById('title');
                const authorEl = document.getElementById('author');
                const genreEl = document.getElementById('genre');
                const descriptionEl = document.getElementById('description');
                const coverEl = document.getElementById('cover');
                const bookFileEl = document.getElementById('bookFile');
                
                if (!titleEl || !authorEl || !genreEl) {
                    alert('–û—à–∏–±–∫–∞: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                    console.error('–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:', {
                        title: !!titleEl,
                        author: !!authorEl,
                        genre: !!genreEl
                    });
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
                const title = (titleEl.value || '').trim();
                const author = (authorEl.value || '').trim();
                // –ü–æ–ª—É—á–∞–µ–º –∂–∞–Ω—Ä –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –∏–∑ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–æ–ª—è
                let genre = (genreEl.value || '').trim();
                const genreCustomEl = document.getElementById('genreCustom');
                if (genre === '–î—Ä—É–≥–æ–µ' && genreCustomEl && genreCustomEl.value.trim()) {
                    genre = genreCustomEl.value.trim();
                }
                if (!genre) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π');
                    return;
                }
                const description = (descriptionEl && descriptionEl.value) ? descriptionEl.value.trim() : '';
                const cover = (coverEl && coverEl.value) ? coverEl.value.trim() : '';
                const bookFile = (bookFileEl && bookFileEl.files && bookFileEl.files.length > 0) ? bookFileEl.files[0] : null;
                
                if (!title || !author || !genre) {
                    alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º FormData
                const formData = new FormData();
                formData.append('title', title);
                formData.append('author', author);
                formData.append('genre', genre);
                if (description) {
                    formData.append('description', description);
                }
                if (cover) {
                    formData.append('cover', cover);
                }
                
                if (bookFile) {
                    formData.append('book_file', bookFile);
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
                const res = await fetch('/api/books', {
                    method: 'POST',
                    body: formData
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
                if (!res.ok) {
                    const errorText = await res.text();
                    let errorData;
                    try {
                        errorData = JSON.parse(errorText);
                    } catch (e) {
                        errorData = { error: errorText || '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' };
                    }
                    alert(errorData.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
                    return;
                }
                
                const data = await res.json();
                showToast(data.message || '–ö–Ω–∏–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
                form.reset();
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                showToast('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏: ' + (error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è/—á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥–∏
        async function downloadBook(bookId) {
            try {
                // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
                window.open(`/read?id=${encodeURIComponent(bookId)}`, '_blank');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–Ω–∏–≥–∏:', error);
                showToast('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–Ω–∏–≥–∏', 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showToast(message, type = 'success') {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 3000);
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏
        async function deleteBook(id) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            const res = await fetch('/api/check-auth');
            const auth = await res.json();
            if (!auth.is_admin) {
                alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞');
                return;
            }
            
            if (!confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É?')) return;
            
            try {
                const res = await fetch(`/api/books?id=${id}`, {
                    method: 'DELETE'
                });
                const data = await res.json();
                alert(data.message || data.error);
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
            }
        }
        
        window.onload = async function() {
            loadSettings();
            const isAdmin = await checkAuth();
            if (isAdmin) {
                loadBooks();
            }
        };
        let currentBackground = null;
        let availableBackgrounds = [];
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function loadSettings() {
            try {
                const res = await fetch('/api/settings');
                const data = await res.json();
                if (data.settings && data.settings.background) {
                    currentBackground = data.settings.background;
                    document.body.style.backgroundImage = `url(${currentBackground})`;
                }
                if (data.availableBackgrounds) {
                    availableBackgrounds = data.availableBackgrounds;
                    renderBackgrounds();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞
        async function saveBackground(bgUrl) {
            try {
                const res = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        background: bgUrl,
                        backgroundType: 'custom'
                    })
                });
                const data = await res.json();
                if (data.settings) {
                    currentBackground = bgUrl;
                    if (bgUrl) {
                        document.body.style.backgroundImage = `url(${bgUrl})`;
                    } else {
                        document.body.style.backgroundImage = '';
                    }
                    toggleBackgroundSelector();
                    loadSettings(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ–Ω–∞:', error);
            }
        }
        
        async function uploadBackground() {
            const fileInput = document.getElementById('backgroundFile');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª');
                return;
            }
            
            try {
                const formData = new FormData();
                formData.append('background_file', file);
                
                const res = await fetch('/api/settings', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await res.json();
                if (res.ok) {
                    alert('–§–æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                    currentBackground = data.settings.background;
                    document.body.style.backgroundImage = `url(${currentBackground})`;
                    fileInput.value = '';
                    loadSettings(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–æ–Ω–æ–≤
                    toggleBackgroundSelector();
                } else {
                    alert(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ–Ω–∞');
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤
        function renderBackgrounds() {
            const grid = document.getElementById('backgroundsGrid');
            grid.innerHTML = '';
            
            availableBackgrounds.forEach(bg => {
                const div = document.createElement('div');
                div.className = 'background-item' + (currentBackground === bg.url ? ' selected' : '');
                div.innerHTML = `
                    <img src="${bg.url}" alt="${bg.name}" onclick="saveBackground('${bg.url}')">
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${bg.name}</div>
                `;
                grid.appendChild(div);
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Ñ–æ–Ω–∞
        function toggleBackgroundSelector() {
            const modal = document.getElementById('backgroundModal');
            modal.classList.toggle('active');
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥
        async function loadBooks() {
            try {
                const res = await fetch('/api/books');
                const books = await res.json();
                const grid = document.getElementById('booksGrid');
                grid.innerHTML = '';
                
                books.forEach(book => {
                    const card = document.createElement('div');
                    card.className = 'book-card';
                    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ–º ID –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ JavaScript
                    const bookId = String(book.id || '').replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const hasFile = book.book_file ? true : false;
                    card.innerHTML = `
                        ${book.cover && book.cover.trim() !== '' ? `
                        <img src="${book.cover}" 
                             alt="–û–±–ª–æ–∂–∫–∞" 
                             onerror="this.onerror=null; this.style.display='none'; const placeholder=this.nextElementSibling; if(placeholder) placeholder.style.display='flex';" 
                             onload="const placeholder=this.nextElementSibling; if(placeholder) placeholder.style.display='none'; this.style.display='block';"
                             style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px; margin: 10px 0; display: block;"
                             referrerpolicy="no-referrer">
                        <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 5px; margin: 10px 0; display: none; align-items: center; justify-content: center; color: white; font-size: 48px;">üìö</div>
                        ` : '<div style="width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 5px; margin: 10px 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">üìö</div>'}
                        <h3>${book.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                        <p><b>–ê–≤—Ç–æ—Ä:</b> ${book.author || '–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω'}</p>
                        <p><b>–ñ–∞–Ω—Ä:</b> ${book.genre || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                        ${book.description ? `<p style="color: #666; font-size: 14px; margin-top: 10px;">${book.description}</p>` : ''}
                        <div style="margin-top: 15px;">
                            ${hasFile ? `<button class="read-btn" data-book-id="${bookId.replace(/"/g, '&quot;')}" onclick="downloadBook('${bookId}')">üìñ –ß–∏—Ç–∞—Ç—å</button>` : ''}
                            <button class="delete-btn" data-book-id="${bookId.replace(/"/g, '&quot;')}" onclick="deleteBook('${bookId}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    `;
                    grid.appendChild(card);
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥');
            }
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
        async function deleteBook(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É?')) return;
            
            try {
                const res = await fetch(`/api/books?id=${id}`, {
                    method: 'DELETE'
                });
                const data = await res.json();
                alert(data.message || data.error);
                loadBooks();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏:', error);
                alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            loadSettings();
            loadBooks();
        };
    </script>
</body>
</html>

